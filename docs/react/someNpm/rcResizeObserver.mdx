---
sidebar_position: 3
---

# rc-resize-observer

import CodeBlock from '@theme/CodeBlock';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

你可以这样安装`rc-resize-observer`

<Tabs>
<TabItem value="Yarn" label="Yarn" default >

```shell
yarn add rc-resize-observer
```

</TabItem>
<TabItem value="npm" label="npm">

```shell   
npm install rc-resize-observer
```

</TabItem>
</Tabs>

:bulb:**rc-resize-observer**用于监听组件的宽高变化

宽高变化指的是子元素**Css**属性的`Height`和`Width`的变化

:::info
子元素宽高的变化来源可能是被子元素的后代位置动态影响了或者主动用`js`逻辑改变了子元素的宽高
:::
```js
import ResizeObserver from 'rc-resize-observer'

function handleResizename() {
    //...
}

ReactDOM.render(
    <ResizeObserver
        onResize={handleResize}
    >
        <div></div>
    </ResizeObserver>,
    document.getElementById('app')
)
```

:triangular_flag_on_post:**试一试：**

```jsx live
function Clock(props) {
    const [width,setWidth] = useState()
    const [height,setHeight] = useState()
    const [show,setShow] = useState(false)

    let Component;
    if(show) {
        Component = (<div><textarea>box1</textarea></div>)
    } else {
        Component = (<textarea>box2</textarea>)
    }
    return (
        <ResizeObserver
            onResize={
                ({ width, height }) => {
                    setWidth(width)
                    setHeight(height)
                }}
            >
                {Component}
                <button onClick={() => {setShow(!show)}}>切换</button>
                <div>长：{height}</div>
                <div>宽：{width}</div>
        </ResizeObserver>
    );
}
```
:point_up:尝试点击上面的按钮，切换`Component`，然后改变**textarea**的大小，你会发现：

* 当组件为内容Box1时，宽不会变化。因为此时，`ResizeObserver`监听的是div的大小，div的宽度默认是父盒子的**100%**不会变，但是高度却会随着textarea的高度变化

* 当组件内容为Box2时，`ResizeObserver`监听的是textare，所以能监听到宽高的变化

:::caution
该组件只能监听子组件的变化，如果你想监听多层，该组件支持嵌套使用
:::

